package dsapi

import (
	"github.com/google/go-cmp/cmp"
	"os"
	"reflect"
	"testing"
)

func TestParseJSONResponse(t *testing.T) {
	r, err := os.Open("sample_forecast.json")
	if err != nil {
		t.Fatal(err)
	}

	expected := Forecast{
		Lat:      42.3601,
		Long:     -71.0589,
		TimeZone: "America/New_York",
		Currently: Data{
			Time:                 1537024581,
			Summary:              "Mostly Cloudy",
			Icon:                 "partly-cloudy-day",
			NearestStormDistance: 119,
			NearestStormBearing:  351,
			PrecipIntensity:      0,
			PrecipProbability:    0.05,
			Temperature:          69.53,
			ApparentTemperature:  70.17,
			DewPoint:             64.73,
			Humidity:             0.85,
			Pressure:             1023.44,
			WindSpeed:            1.26,
			WindGust:             2.34,
			WindBearing:          125,
			CloudCover:           0.67,
			UVIndex:              5,
			Visibility:           9.07,
			Ozone:                266.06,
		},
		Minutely: Minutely{
			Summary: "Mostly cloudy for the hour.",
			Icon:    "partly-cloudy-day",
			Data: []Data{
				{Time: 1537024560, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537024620, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537024680, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537024740, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537024800, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537024860, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537024920, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537024980, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025040, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025100, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025160, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025220, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025280, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025340, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025400, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025460, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025520, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025580, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025640, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025700, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025760, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025820, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025880, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537025940, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026000, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026060, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026120, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026180, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026240, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026300, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026360, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026420, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026480, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026540, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026600, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026660, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026720, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026780, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026840, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026900, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537026960, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027020, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027080, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027140, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027200, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027260, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027320, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027380, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027440, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027500, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027560, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027620, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027680, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027740, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027800, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027860, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027920, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537027980, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537028040, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537028100, PrecipIntensity: 0, PrecipProbability: 0},
				{Time: 1537028160, PrecipIntensity: 0, PrecipProbability: 0},
			},
		},
		Hourly: Hourly{
			Summary: "Partly cloudy starting tonight.",
			Icon:    "partly-cloudy-night",
			Data: []Data{
				{
					Time:                1537023600,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0016,
					PrecipProbability:   0.02,
					PrecipType:          "rain",
					Temperature:         68.85,
					ApparentTemperature: 69.52,
					DewPoint:            64.78,
					Humidity:            0.87,
					Pressure:            1023.49,
					WindSpeed:           1.09,
					WindGust:            2.23,
					WindBearing:         132,
					CloudCover:          0.73,
					UVIndex:             4,
					Visibility:          8.4,
					Ozone:               266.18,
				},
				{
					Time:                1537027200,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0003,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         71.34,
					ApparentTemperature: 71.89,
					DewPoint:            64.48,
					Humidity:            0.79,
					Pressure:            1023.29,
					WindSpeed:           1.77,
					WindGust:            2.65,
					WindBearing:         113,
					CloudCover:          0.49,
					UVIndex:             6,
					Visibility:          10,
					Ozone:               265.74,
				},
				{
					Time:                1537030800,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0022,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         73.45,
					ApparentTemperature: 73.88,
					DewPoint:            63.88,
					Humidity:            0.72,
					Pressure:            1022.72,
					WindSpeed:           2.87,
					WindGust:            4.04,
					WindBearing:         104,
					CloudCover:          0.27,
					UVIndex:             6,
					Visibility:          10,
					Ozone:               265.31,
				},
				{
					Time:                1537034400,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         74.76,
					ApparentTemperature: 75.12,
					DewPoint:            63.39,
					Humidity:            0.68,
					Pressure:            1022.49,
					WindSpeed:           3.55,
					WindGust:            5.23,
					WindBearing:         105,
					CloudCover:          0.14,
					UVIndex:             6,
					Visibility:          10,
					Ozone:               264.76,
				},
				{
					Time:                1537038000,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0.0015,
					PrecipProbability:   0.02,
					PrecipType:          "rain",
					Temperature:         75.22,
					ApparentTemperature: 75.56,
					DewPoint:            63.19,
					Humidity:            0.66,
					Pressure:            1022.05,
					WindSpeed:           4.02,
					WindGust:            5.56,
					WindBearing:         114,
					CloudCover:          0.13,
					UVIndex:             4,
					Visibility:          10,
					Ozone:               264.04,
				},
				{
					Time:                1537041600,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0.0008,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         75.08,
					ApparentTemperature: 75.4,
					DewPoint:            63,
					Humidity:            0.66,
					Pressure:            1021.95,
					WindSpeed:           4.31,
					WindGust:            5.42,
					WindBearing:         124,
					CloudCover:          0.14,
					UVIndex:             3,
					Visibility:          10,
					Ozone:               263.24,
				},
				{
					Time:                1537045200,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         73.98,
					ApparentTemperature: 74.29,
					DewPoint:            62.94,
					Humidity:            0.68,
					Pressure:            1021.74,
					WindSpeed:           4.78,
					WindGust:            5.9,
					WindBearing:         134,
					CloudCover:          0.16,
					UVIndex:             1,
					Visibility:          10,
					Ozone:               262.52,
				},
				{
					Time:                1537048800,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0.002,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         72.66,
					ApparentTemperature: 72.99,
					DewPoint:            62.94,
					Humidity:            0.72,
					Pressure:            1021.66,
					WindSpeed:           5.09,
					WindGust:            6.86,
					WindBearing:         137,
					CloudCover:          0.18,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               262.01,
				},
				{
					Time:                1537052400,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0.0012,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         70.86,
					ApparentTemperature: 71.23,
					DewPoint:            63.07,
					Humidity:            0.76,
					Pressure:            1021.79,
					WindSpeed:           5.21,
					WindGust:            8.38,
					WindBearing:         136,
					CloudCover:          0.2,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               261.6,
				},
				{
					Time:                1537056000,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         70.01,
					ApparentTemperature: 70.41,
					DewPoint:            63.11,
					Humidity:            0.79,
					Pressure:            1021.99,
					WindSpeed:           5.25,
					WindGust:            9.42,
					WindBearing:         141,
					CloudCover:          0.22,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               261.29,
				},
				{
					Time:                1537059600,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         70.04,
					ApparentTemperature: 70.46,
					DewPoint:            63.24,
					Humidity:            0.79,
					Pressure:            1022.2,
					WindSpeed:           5.38,
					WindGust:            9.69,
					WindBearing:         156,
					CloudCover:          0.22,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               261.26,
				},
				{
					Time:                1537063200,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         70.11,
					ApparentTemperature: 70.53,
					DewPoint:            63.22,
					Humidity:            0.79,
					Pressure:            1022.36,
					WindSpeed:           5.46,
					WindGust:            10.23,
					WindBearing:         174,
					CloudCover:          0.22,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               261.28,
				},
				{
					Time:                1537066800,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         70,
					ApparentTemperature: 70.42,
					DewPoint:            63.25,
					Humidity:            0.79,
					Pressure:            1022.38,
					WindSpeed:           5.3,
					WindGust:            9.69,
					WindBearing:         189,
					CloudCover:          0.22,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               261.15,
				},
				{
					Time:                1537070400,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0.0011,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         69.83,
					ApparentTemperature: 70.24,
					DewPoint:            63.14,
					Humidity:            0.79,
					Pressure:            1022.33,
					WindSpeed:           5.07,
					WindGust:            9.52,
					WindBearing:         201,
					CloudCover:          0.23,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               260.4,
				},
				{
					Time:                1537074000,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0003,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         66.21,
					ApparentTemperature: 66.76,
					DewPoint:            63.19,
					Humidity:            0.9,
					Pressure:            1022.36,
					WindSpeed:           4.41,
					WindGust:            7.28,
					WindBearing:         213,
					CloudCover:          0.36,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               259.44,
				},
				{
					Time:                1537077600,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0003,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         65.65,
					ApparentTemperature: 66.2,
					DewPoint:            62.99,
					Humidity:            0.91,
					Pressure:            1022.18,
					WindSpeed:           3.98,
					WindGust:            6.74,
					WindBearing:         224,
					CloudCover:          0.38,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               258.54,
				},
				{
					Time:                1537081200,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0005,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         64.69,
					ApparentTemperature: 65.24,
					DewPoint:            62.68,
					Humidity:            0.93,
					Pressure:            1021.96,
					WindSpeed:           3.65,
					WindGust:            6,
					WindBearing:         232,
					CloudCover:          0.38,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               257.88,
				},
				{
					Time:                1537084800,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0007,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         63.84,
					ApparentTemperature: 64.38,
					DewPoint:            62.31,
					Humidity:            0.95,
					Pressure:            1021.72,
					WindSpeed:           3.35,
					WindGust:            5.14,
					WindBearing:         239,
					CloudCover:          0.38,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               257.19,
				},
				{
					Time:                1537088400,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.001,
					PrecipProbability:   0.02,
					PrecipType:          "rain",
					Temperature:         63.13,
					ApparentTemperature: 63.68,
					DewPoint:            62.11,
					Humidity:            0.96,
					Pressure:            1021.67,
					WindSpeed:           3.09,
					WindGust:            4.33,
					WindBearing:         241,
					CloudCover:          0.39,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               256.73,
				},
				{
					Time:                1537092000,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0011,
					PrecipProbability:   0.02,
					PrecipType:          "rain",
					Temperature:         63.3,
					ApparentTemperature: 63.84,
					DewPoint:            62.14,
					Humidity:            0.96,
					Pressure:            1021.93,
					WindSpeed:           2.77,
					WindGust:            3.64,
					WindBearing:         237,
					CloudCover:          0.4,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               256.51,
				},
				{
					Time:                1537095600,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0011,
					PrecipProbability:   0.02,
					PrecipType:          "rain",
					Temperature:         64.08,
					ApparentTemperature: 64.61,
					DewPoint:            62.36,
					Humidity:            0.94,
					Pressure:            1022.41,
					WindSpeed:           2.38,
					WindGust:            3,
					WindBearing:         253,
					CloudCover:          0.43,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               256.49,
				},
				{
					Time:                1537099200,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0011,
					PrecipProbability:   0.02,
					PrecipType:          "rain",
					Temperature:         66.79,
					ApparentTemperature: 67.24,
					DewPoint:            62.66,
					Humidity:            0.87,
					Pressure:            1022.81,
					WindSpeed:           2.2,
					WindGust:            2.53,
					WindBearing:         246,
					CloudCover:          0.44,
					UVIndex:             1,
					Visibility:          10,
					Ozone:               256.44,
				},
				{
					Time:                1537102800,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0007,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         67.31,
					ApparentTemperature: 67.81,
					DewPoint:            63.2,
					Humidity:            0.87,
					Pressure:            1023.11,
					WindSpeed:           2.03,
					WindGust:            2.25,
					WindBearing:         233,
					CloudCover:          0.44,
					UVIndex:             2,
					Visibility:          10,
					Ozone:               256.25,
				},
				{
					Time:                1537106400,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0005,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         69.25,
					ApparentTemperature: 69.78,
					DewPoint:            63.89,
					Humidity:            0.83,
					Pressure:            1023.36,
					WindSpeed:           2.02,
					WindGust:            2.09,
					WindBearing:         195,
					CloudCover:          0.42,
					UVIndex:             4,
					Visibility:          10,
					Ozone:               256.01,
				},
				{
					Time:                1537110000,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0004,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         71.87,
					ApparentTemperature: 72.38,
					DewPoint:            64.31,
					Humidity:            0.77,
					Pressure:            1023.42,
					WindSpeed:           2.04,
					WindGust:            2.12,
					WindBearing:         174,
					CloudCover:          0.4,
					UVIndex:             5,
					Visibility:          10,
					Ozone:               255.89,
				},
				{
					Time:                1537113600,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0.0003,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         74.45,
					ApparentTemperature: 74.9,
					DewPoint:            64.11,
					Humidity:            0.7,
					Pressure:            1023.21,
					WindSpeed:           2.29,
					WindGust:            2.4,
					WindBearing:         157,
					CloudCover:          0.37,
					UVIndex:             6,
					Visibility:          10,
					Ozone:               255.63,
				},
				{
					Time:                1537117200,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         77.12,
					ApparentTemperature: 77.5,
					DewPoint:            63.56,
					Humidity:            0.63,
					Pressure:            1022.82,
					WindSpeed:           2.66,
					WindGust:            2.86,
					WindBearing:         141,
					CloudCover:          0.34,
					UVIndex:             6,
					Visibility:          10,
					Ozone:               255.5,
				},
				{
					Time:                1537120800,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         78.75,
					ApparentTemperature: 79.08,
					DewPoint:            63.01,
					Humidity:            0.59,
					Pressure:            1022.42,
					WindSpeed:           3.14,
					WindGust:            3.37,
					WindBearing:         129,
					CloudCover:          0.28,
					UVIndex:             6,
					Visibility:          10,
					Ozone:               255.28,
				},
				{
					Time:                1537124400,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         79.49,
					ApparentTemperature: 79.78,
					DewPoint:            62.5,
					Humidity:            0.56,
					Pressure:            1021.98,
					WindSpeed:           3.79,
					WindGust:            3.86,
					WindBearing:         124,
					CloudCover:          0.22,
					UVIndex:             4,
					Visibility:          10,
					Ozone:               255.1,
				},
				{
					Time:                1537128000,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         79.5,
					ApparentTemperature: 79.75,
					DewPoint:            62.03,
					Humidity:            0.55,
					Pressure:            1021.52,
					WindSpeed:           4.55,
					WindGust:            4.75,
					WindBearing:         122,
					CloudCover:          0.13,
					UVIndex:             3,
					Visibility:          10,
					Ozone:               254.88,
				},
				{
					Time:                1537131600,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         78.6,
					ApparentTemperature: 78.82,
					DewPoint:            61.86,
					Humidity:            0.57,
					Pressure:            1021.28,
					WindSpeed:           5.23,
					WindGust:            5.7,
					WindBearing:         124,
					CloudCover:          0.08,
					UVIndex:             1,
					Visibility:          10,
					Ozone:               254.69,
				},
				{
					Time:                1537135200,
					Summary:             "Clear",
					Icon:                "clear-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         77.14,
					ApparentTemperature: 77.38,
					DewPoint:            62.21,
					Humidity:            0.6,
					Pressure:            1021.41,
					WindSpeed:           5.79,
					WindGust:            7.14,
					WindBearing:         131,
					CloudCover:          0.08,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               254.52,
				},
				{
					Time:                1537138800,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         75.12,
					ApparentTemperature: 75.42,
					DewPoint:            62.85,
					Humidity:            0.66,
					Pressure:            1021.73,
					WindSpeed:           6.26,
					WindGust:            9.08,
					WindBearing:         142,
					CloudCover:          0.1,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               254.45,
				},
				{
					Time:                1537142400,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         73.46,
					ApparentTemperature: 73.83,
					DewPoint:            63.38,
					Humidity:            0.71,
					Pressure:            1022.03,
					WindSpeed:           6.5,
					WindGust:            10.42,
					WindBearing:         154,
					CloudCover:          0.14,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               254.46,
				},
				{
					Time:                1537146000,
					Summary:             "Clear",
					Icon:                "clear-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         72.67,
					ApparentTemperature: 73.1,
					DewPoint:            63.74,
					Humidity:            0.74,
					Pressure:            1022.26,
					WindSpeed:           6.38,
					WindGust:            10.71,
					WindBearing:         168,
					CloudCover:          0.2,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               254.61,
				},
				{
					Time:                1537149600,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         72.13,
					ApparentTemperature: 72.59,
					DewPoint:            63.95,
					Humidity:            0.75,
					Pressure:            1022.43,
					WindSpeed:           6.08,
					WindGust:            10.49,
					WindBearing:         184,
					CloudCover:          0.28,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               254.95,
				},
				{
					Time:                1537153200,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         71.59,
					ApparentTemperature: 72.07,
					DewPoint:            63.95,
					Humidity:            0.77,
					Pressure:            1022.5,
					WindSpeed:           5.89,
					WindGust:            10.56,
					WindBearing:         196,
					CloudCover:          0.34,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               255.22,
				},
				{
					Time:                1537156800,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         71.21,
					ApparentTemperature: 71.67,
					DewPoint:            63.72,
					Humidity:            0.77,
					Pressure:            1022.38,
					WindSpeed:           6.03,
					WindGust:            11.3,
					WindBearing:         204,
					CloudCover:          0.37,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               255.35,
				},
				{
					Time:                1537160400,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0002,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         67.75,
					ApparentTemperature: 68.26,
					DewPoint:            63.36,
					Humidity:            0.86,
					Pressure:            1022.14,
					WindSpeed:           6.3,
					WindGust:            12.3,
					WindBearing:         209,
					CloudCover:          0.38,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               255.52,
				},
				{
					Time:                1537164000,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0003,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         67.43,
					ApparentTemperature: 67.91,
					DewPoint:            63.01,
					Humidity:            0.86,
					Pressure:            1021.89,
					WindSpeed:           6.5,
					WindGust:            13.07,
					WindBearing:         213,
					CloudCover:          0.4,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               255.56,
				},
				{
					Time:                1537167600,
					Summary:             "Partly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0003,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         66.83,
					ApparentTemperature: 67.29,
					DewPoint:            62.72,
					Humidity:            0.87,
					Pressure:            1021.67,
					WindSpeed:           6.59,
					WindGust:            13.45,
					WindBearing:         216,
					CloudCover:          0.49,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               255.67,
				},
				{
					Time:                1537171200,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0003,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         66.08,
					ApparentTemperature: 66.53,
					DewPoint:            62.47,
					Humidity:            0.88,
					Pressure:            1021.47,
					WindSpeed:           6.65,
					WindGust:            13.65,
					WindBearing:         217,
					CloudCover:          0.6,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               255.73,
				},
				{
					Time:                1537174800,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0004,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         65.05,
					ApparentTemperature: 65.51,
					DewPoint:            62.23,
					Humidity:            0.91,
					Pressure:            1021.32,
					WindSpeed:           6.72,
					WindGust:            13.66,
					WindBearing:         218,
					CloudCover:          0.69,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               255.84,
				},
				{
					Time:                1537178400,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-night",
					PrecipIntensity:     0.0002,
					PrecipProbability:   0.01,
					PrecipType:          "rain",
					Temperature:         67.48,
					ApparentTemperature: 67.81,
					DewPoint:            61.98,
					Humidity:            0.83,
					Pressure:            1021.33,
					WindSpeed:           6.8,
					WindGust:            13.46,
					WindBearing:         219,
					CloudCover:          0.74,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               256,
				},
				{
					Time:                1537182000,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         66.89,
					ApparentTemperature: 67.21,
					DewPoint:            61.76,
					Humidity:            0.84,
					Pressure:            1021.41,
					WindSpeed:           6.85,
					WindGust:            13.1,
					WindBearing:         218,
					CloudCover:          0.77,
					UVIndex:             0,
					Visibility:          10,
					Ozone:               256.36,
				},
				{
					Time:                1537185600,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         66.83,
					ApparentTemperature: 67.13,
					DewPoint:            61.57,
					Humidity:            0.83,
					Pressure:            1021.41,
					WindSpeed:           6.95,
					WindGust:            12.8,
					WindBearing:         218,
					CloudCover:          0.78,
					UVIndex:             1,
					Visibility:          10,
					Ozone:               256.57,
				},
				{
					Time:                1537189200,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         67.57,
					ApparentTemperature: 67.83,
					DewPoint:            61.51,
					Humidity:            0.81,
					Pressure:            1021.33,
					WindSpeed:           7.02,
					WindGust:            12.6,
					WindBearing:         219,
					CloudCover:          0.77,
					UVIndex:             2,
					Visibility:          10,
					Ozone:               256.77,
				},
				{
					Time:                1537192800,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         69.23,
					ApparentTemperature: 69.45,
					DewPoint:            61.55,
					Humidity:            0.77,
					Pressure:            1021.17,
					WindSpeed:           7.08,
					WindGust:            12.46,
					WindBearing:         218,
					CloudCover:          0.74,
					UVIndex:             3,
					Visibility:          10,
					Ozone:               256.97,
				},
				{
					Time:                1537196400,
					Summary:             "Mostly Cloudy",
					Icon:                "partly-cloudy-day",
					PrecipIntensity:     0,
					PrecipProbability:   0,
					Temperature:         70.67,
					ApparentTemperature: 70.87,
					DewPoint:            61.59,
					Humidity:            0.73,
					Pressure:            1020.83,
					WindSpeed:           7.16,
					WindGust:            12.56,
					WindBearing:         218,
					CloudCover:          0.7,
					UVIndex:             4,
					Visibility:          10,
					Ozone:               257.1,
				},
			},
		},
		Daily: Daily{
			Summary: "Rain on Tuesday, with high temperatures falling to 69°F on Thursday.",
			Icon:    "rain",
			Data: []Data{
				{
					Time:                        1536984000,
					Summary:                     "Mostly cloudy until afternoon.",
					Icon:                        "partly-cloudy-day",
					SunriseTime:                 1537007145,
					SunsetTime:                  1537052146,
					MoonPhase:                   0.21,
					PrecipIntensity:             0.0004,
					PrecipIntensityMax:          0.0022,
					PrecipIntensityMaxTime:      1537030800,
					PrecipProbability:           0.08,
					PrecipType:                  "rain",
					TemperatureHigh:             75.22,
					TemperatureHighTime:         1537038000,
					TemperatureLow:              63.13,
					TemperatureLowTime:          1537088400,
					ApparentTemperatureHigh:     75.56,
					ApparentTemperatureHighTime: 1537038000,
					ApparentTemperatureLow:      63.68,
					ApparentTemperatureLowTime:  1537088400,
					DewPoint:                    62.77,
					Humidity:                    0.83,
					Pressure:                    1022.83,
					WindSpeed:                   2.16,
					WindGust:                    10.23,
					WindGustTime:                1537063200,
					WindBearing:                 141,
					CloudCover:                  0.57,
					UVIndex:                     6,
					UVIndexTime:                 1537027200,
					Visibility:                  9.08,
					Ozone:                       265.51,
					TemperatureMin:              62.01,
					TemperatureMinTime:          1536987600,
					TemperatureMax:              75.22,
					TemperatureMaxTime:          1537038000,
					ApparentTemperatureMin:      62.29,
					ApparentTemperatureMinTime:  1536987600,
					ApparentTemperatureMax:      75.56,
					ApparentTemperatureMaxTime:  1537038000,
				},
				{
					Time:                        1537070400,
					Summary:                     "Partly cloudy until afternoon.",
					Icon:                        "partly-cloudy-day",
					SunriseTime:                 1537093608,
					SunsetTime:                  1537138439,
					MoonPhase:                   0.24,
					PrecipIntensity:             0.0004,
					PrecipIntensityMax:          0.0011,
					PrecipIntensityMaxTime:      1537095600,
					PrecipProbability:           0.06,
					PrecipType:                  "rain",
					TemperatureHigh:             79.5,
					TemperatureHighTime:         1537128000,
					TemperatureLow:              65.05,
					TemperatureLowTime:          1537174800,
					ApparentTemperatureHigh:     79.78,
					ApparentTemperatureHighTime: 1537124400,
					ApparentTemperatureLow:      65.51,
					ApparentTemperatureLowTime:  1537174800,
					DewPoint:                    63,
					Humidity:                    0.77,
					Pressure:                    1022.29,
					WindSpeed:                   2.97,
					WindGust:                    10.71,
					WindGustTime:                1537146000,
					WindBearing:                 178,
					CloudCover:                  0.3,
					UVIndex:                     6,
					UVIndexTime:                 1537113600,
					Visibility:                  10,
					Ozone:                       256.13,
					TemperatureMin:              63.13,
					TemperatureMinTime:          1537088400,
					TemperatureMax:              79.5,
					TemperatureMaxTime:          1537128000,
					ApparentTemperatureMin:      63.68,
					ApparentTemperatureMinTime:  1537088400,
					ApparentTemperatureMax:      79.78,
					ApparentTemperatureMaxTime:  1537124400,
				},
				{
					Time:                        1537156800,
					Summary:                     "Mostly cloudy throughout the day.",
					Icon:                        "partly-cloudy-day",
					SunriseTime:                 1537180071,
					SunsetTime:                  1537224732,
					MoonPhase:                   0.27,
					PrecipIntensity:             0.0003,
					PrecipIntensityMax:          0.0009,
					PrecipIntensityMaxTime:      1537239600,
					PrecipProbability:           0.07,
					PrecipType:                  "rain",
					TemperatureHigh:             79.29,
					TemperatureHighTime:         1537218000,
					TemperatureLow:              71.97,
					TemperatureLowTime:          1537254000,
					ApparentTemperatureHigh:     79.79,
					ApparentTemperatureHighTime: 1537218000,
					ApparentTemperatureLow:      72.96,
					ApparentTemperatureLowTime:  1537254000,
					DewPoint:                    63.23,
					Humidity:                    0.75,
					Pressure:                    1019.43,
					WindSpeed:                   7.59,
					WindGust:                    19.2,
					WindGustTime:                1537239600,
					WindBearing:                 217,
					CloudCover:                  0.62,
					UVIndex:                     5,
					UVIndexTime:                 1537200000,
					Visibility:                  10,
					Ozone:                       255.57,
					TemperatureMin:              65.05,
					TemperatureMinTime:          1537174800,
					TemperatureMax:              79.29,
					TemperatureMaxTime:          1537218000,
					ApparentTemperatureMin:      65.51,
					ApparentTemperatureMinTime:  1537174800,
					ApparentTemperatureMax:      79.79,
					ApparentTemperatureMaxTime:  1537218000,
				},
				{
					Time:                        1537243200,
					Summary:                     "Rain until afternoon, starting again in the evening.",
					Icon:                        "rain",
					SunriseTime:                 1537266533,
					SunsetTime:                  1537311025,
					MoonPhase:                   0.3,
					PrecipIntensity:             0.0353,
					PrecipIntensityMax:          0.0844,
					PrecipIntensityMaxTime:      1537315200,
					PrecipProbability:           0.89,
					PrecipType:                  "rain",
					TemperatureHigh:             76.54,
					TemperatureHighTime:         1537293600,
					TemperatureLow:              63.14,
					TemperatureLowTime:          1537358400,
					ApparentTemperatureHigh:     77.64,
					ApparentTemperatureHighTime: 1537293600,
					ApparentTemperatureLow:      63.14,
					ApparentTemperatureLowTime:  1537358400,
					DewPoint:                    68.63,
					Humidity:                    0.83,
					Pressure:                    1008.61,
					WindSpeed:                   5.69,
					WindGust:                    26.02,
					WindGustTime:                1537279200,
					WindBearing:                 215,
					CloudCover:                  0.94,
					UVIndex:                     5,
					UVIndexTime:                 1537290000,
					Visibility:                  10,
					Ozone:                       252.82,
					TemperatureMin:              71.97,
					TemperatureMinTime:          1537254000,
					TemperatureMax:              76.54,
					TemperatureMaxTime:          1537293600,
					ApparentTemperatureMin:      72.96,
					ApparentTemperatureMinTime:  1537254000,
					ApparentTemperatureMax:      77.64,
					ApparentTemperatureMaxTime:  1537293600,
				},
				{
					Time:                        1537329600,
					Summary:                     "Mostly cloudy in the morning.",
					Icon:                        "partly-cloudy-night",
					SunriseTime:                 1537352996,
					SunsetTime:                  1537397318,
					MoonPhase:                   0.33,
					PrecipIntensity:             0.0001,
					PrecipIntensityMax:          0.0003,
					PrecipIntensityMaxTime:      1537336800,
					PrecipProbability:           0.06,
					PrecipType:                  "rain",
					TemperatureHigh:             69.53,
					TemperatureHighTime:         1537383600,
					TemperatureLow:              58.28,
					TemperatureLowTime:          1537437600,
					ApparentTemperatureHigh:     69.53,
					ApparentTemperatureHighTime: 1537383600,
					ApparentTemperatureLow:      58.28,
					ApparentTemperatureLowTime:  1537437600,
					DewPoint:                    52.75,
					Humidity:                    0.6,
					Pressure:                    1010.75,
					WindSpeed:                   8.22,
					WindGust:                    23.66,
					WindGustTime:                1537340400,
					WindBearing:                 357,
					CloudCover:                  0.34,
					UVIndex:                     6,
					UVIndexTime:                 1537372800,
					Visibility:                  10,
					Ozone:                       272.89,
					TemperatureMin:              63.14,
					TemperatureMinTime:          1537358400,
					TemperatureMax:              72.64,
					TemperatureMaxTime:          1537329600,
					ApparentTemperatureMin:      63.14,
					ApparentTemperatureMinTime:  1537358400,
					ApparentTemperatureMax:      73.35,
					ApparentTemperatureMaxTime:  1537329600,
				},
				{
					Time:                        1537416000,
					Summary:                     "Partly cloudy starting in the afternoon.",
					Icon:                        "partly-cloudy-night",
					SunriseTime:                 1537439459,
					SunsetTime:                  1537483611,
					MoonPhase:                   0.36,
					PrecipIntensity:             0,
					PrecipIntensityMax:          0.0002,
					PrecipIntensityMaxTime:      1537423200,
					PrecipProbability:           0,
					TemperatureHigh:             69.13,
					TemperatureHighTime:         1537473600,
					TemperatureLow:              56.77,
					TemperatureLowTime:          1537506000,
					ApparentTemperatureHigh:     69.13,
					ApparentTemperatureHighTime: 1537473600,
					ApparentTemperatureLow:      56.77,
					ApparentTemperatureLowTime:  1537506000,
					DewPoint:                    42.31,
					Humidity:                    0.47,
					Pressure:                    1023.31,
					WindSpeed:                   1.7,
					WindGust:                    20.25,
					WindGustTime:                1537498800,
					WindBearing:                 8,
					CloudCover:                  0.25,
					UVIndex:                     6,
					UVIndexTime:                 1537455600,
					Visibility:                  10,
					Ozone:                       262.5,
					TemperatureMin:              58.28,
					TemperatureMinTime:          1537437600,
					TemperatureMax:              69.13,
					TemperatureMaxTime:          1537473600,
					ApparentTemperatureMin:      58.28,
					ApparentTemperatureMinTime:  1537437600,
					ApparentTemperatureMax:      69.13,
					ApparentTemperatureMaxTime:  1537473600,
				},
				{
					Time:                        1537502400,
					Summary:                     "Partly cloudy until afternoon and windy overnight.",
					Icon:                        "wind",
					SunriseTime:                 1537525922,
					SunsetTime:                  1537569903,
					MoonPhase:                   0.39,
					PrecipIntensity:             0,
					PrecipIntensityMax:          0.0002,
					PrecipIntensityMaxTime:      1537552800,
					PrecipProbability:           0,
					TemperatureHigh:             79.35,
					TemperatureHighTime:         1537556400,
					TemperatureLow:              70.31,
					TemperatureLowTime:          1537617600,
					ApparentTemperatureHigh:     79.35,
					ApparentTemperatureHighTime: 1537556400,
					ApparentTemperatureLow:      70.31,
					ApparentTemperatureLowTime:  1537617600,
					DewPoint:                    54.78,
					Humidity:                    0.59,
					Pressure:                    1019.07,
					WindSpeed:                   11.07,
					WindGust:                    39.79,
					WindGustTime:                1537585200,
					WindBearing:                 213,
					CloudCover:                  0.36,
					UVIndex:                     6,
					UVIndexTime:                 1537545600,
					Visibility:                  10,
					Ozone:                       262.75,
					TemperatureMin:              56.77,
					TemperatureMinTime:          1537506000,
					TemperatureMax:              79.35,
					TemperatureMaxTime:          1537556400,
					ApparentTemperatureMin:      56.77,
					ApparentTemperatureMinTime:  1537506000,
					ApparentTemperatureMax:      79.35,
					ApparentTemperatureMaxTime:  1537556400,
				},
				{
					Time:                        1537588800,
					Summary:                     "Mostly cloudy throughout the day.",
					Icon:                        "partly-cloudy-day",
					SunriseTime:                 1537612385,
					SunsetTime:                  1537656196,
					MoonPhase:                   0.42,
					PrecipIntensity:             0.0009,
					PrecipIntensityMax:          0.0054,
					PrecipIntensityMaxTime:      1537606800,
					PrecipProbability:           0.15,
					PrecipType:                  "rain",
					TemperatureHigh:             73.95,
					TemperatureHighTime:         1537639200,
					TemperatureLow:              60.81,
					TemperatureLowTime:          1537696800,
					ApparentTemperatureHigh:     73.95,
					ApparentTemperatureHighTime: 1537639200,
					ApparentTemperatureLow:      60.81,
					ApparentTemperatureLowTime:  1537696800,
					DewPoint:                    55.84,
					Humidity:                    0.57,
					Pressure:                    1016.19,
					WindSpeed:                   4.5,
					WindGust:                    39.62,
					WindGustTime:                1537588800,
					WindBearing:                 313,
					CloudCover:                  0.84,
					UVIndex:                     4,
					UVIndexTime:                 1537628400,
					Visibility:                  10,
					Ozone:                       267.15,
					TemperatureMin:              65.59,
					TemperatureMinTime:          1537671600,
					TemperatureMax:              74.58,
					TemperatureMaxTime:          1537599600,
					ApparentTemperatureMin:      65.59,
					ApparentTemperatureMinTime:  1537671600,
					ApparentTemperatureMax:      75.13,
					ApparentTemperatureMaxTime:  1537596000,
				},
			},
		},
	}

	actual, err := parseForecastJSON(r)
	if err != nil {
		t.Fatal(err)
	}

	if !reflect.DeepEqual(expected, actual) {
		t.Errorf("expected: %+v, actual: %+v", expected, actual)
	}
}

func TestForecastUrl(t *testing.T) {
	var urlTests = []struct {
		key      string
		lat      float64
		long     float64
		excludes []Exclude
		expected string // expected result
	}{
		{"abc123", 42.3601, -71.0589, []Exclude{ExcludeMinutely, ExcludeDaily},
			"https://api.darksky.net/forecast/abc123/42.3601,-71.0589?exclude=minutely,daily"},

		{"abc123", 42.3601, -71.0589, []Exclude{ExcludeMinutely},
			"https://api.darksky.net/forecast/abc123/42.3601,-71.0589?exclude=minutely"},

		{"abc123", 42.3601, -71.0589, []Exclude{},
			"https://api.darksky.net/forecast/abc123/42.3601,-71.0589"},
	}

	for _, tt := range urlTests {
		actual := forecastURL(tt.key, tt.lat, tt.long, tt.excludes)
		if actual != tt.expected {
			t.Errorf("forecastURL(): expected %s\n%s", tt.expected, cmp.Diff(tt.expected, actual))
		}
	}
}
